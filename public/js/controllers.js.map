{"version":3,"sources":["myController.js"],"names":[],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"controllers.js","sourcesContent":["myApp.controller('myController',['$scope','projectModel','userModel','$location',\n    function($scope, projectModel, userModel, $location){\n    angular.extend($scope, {\n\n        login:{},\n\n        save:{},\n\n        user: {},\n\n        register: {},\n\n        data: {\n            text: ''\n        },\n        projects: projectModel.projects,\n\n        showUser: false,\n        showLogin: true,\n        isProjectsListOpen: false,\n        isProjectsListClose: true,\n\n        loadText: function(id){\n            this.data.text = projectModel.loadText(id);\n            this.save.name = projectModel.getName(id);\n            this.save.comment = projectModel.getComment(id);\n\n            setTimeout(function() {\n                angular.element( $('#projectsArrow[ng-click=\"toggleProjectsList()\"]')).triggerHandler('click');\n            },100);\n        },\n        remove: function(id){\n            if(userModel.getUserObject() != null)\n                projectModel.removeProject(id);\n            else\n                projectModel.removeFromGUI(id);\n        },\n        reset: function(){\n            projectModel.resetAllActive();\n            this.data.text = '';\n            this.save.name = '';\n            this.save.comment = '';\n        },\n        triggerSaveModal: function(){\n            if(userModel.getUserObject() != null)\n                $('#saveModal').modal();\n            else\n                this.triggerLoginModal();\n        },\n        saveProject: function(){\n\n            var project = {};\n            var projectActive = projectModel.getProjectActive();\n\n            project.name = this.save.name;\n            project.comment = this.save.comment;\n            project.body = this.data.text;\n            project.owner_id = userModel.getUserObject().id;\n\n            if(projectActive != null){\n                project.id = projectActive.id;\n                projectModel.updateProjects(project);\n            }else\n                projectModel.saveProjects(project);\n\n            $('#saveModal').modal('hide');\n        },\n        triggerLoginModal: function(){\n            $('#loginModal').modal();\n        },\n        doLogin: function(){\n            var data = {\n                email: $scope.login.email,\n                password: $scope.login.password\n            };\n            userModel.doLogin(data).then(function () {\n                $scope.user.name = userModel.getUserObject().name;\n                $scope.showLogin = false;\n                $scope.showUser= true;\n                projectModel.getProjects();\n                $location.path('/o');\n            });\n            \n            $('#loginModal').modal('hide');\n        },\n        doLogout: function(){\n            userModel.doUserLogout();\n            $scope.showLogin = true;\n            $scope.showUser= false;\n            this.reset();\n            projectModel.projects.splice(0,projectModel.projects.length);\n            init();\n        },\n        triggerRegisterModal: function(){\n            $('#loginModal').modal('hide');\n            $('#registerModal').modal();\n        },\n        doRegister: function() {\n            var newUser = {};\n            newUser.name = $scope.register.name;\n            newUser.email = $scope.register.email;\n            newUser.password = $scope.register.password;\n            console.log(newUser);\n            userModel.registerUser(newUser);\n\n            $('#registerModal').modal('hide');\n        },\n        getClass: function(object){\n            return object.isActive ? 'active' : '';\n        },\n        toggleProjectsList: function(){\n            this.isProjectsListOpen = !this.isProjectsListOpen;\n            this.isProjectsListClose = !this.isProjectsListClose;\n            console.log(this.isProjectsListOpen);\n            console.log(this.isProjectsListClose);\n            console.log('-----');\n        }\n    });\n\n    // method to initialize user info in header\n    var init = function () {\n        if(userModel.getUserObject()){\n            $scope.showUser = true;\n            $scope.showLogin = !$scope.showUser;\n            $scope.user.name = userModel.getUserObject().name;\n            projectModel.getProjects();\n        }else{\n            projectModel.projects[0] =\n            {\n                isActive: false,\n                id: 0,\n                name: 'Example',\n                comment: 'This is an example',\n                date: new Date(),\n                text: '<p>Test Content<p>'\n            };\n        }\n    };\n    init();\n}]);"],"sourceRoot":"/source/"}